---
layout:       post
title:        "å°è¯•çš„ä¼˜åŒ–æ¸²æŸ“é€Ÿåº¦çš„æ–¹æ³•"
author:       "shensunbo"
header-style: text
catalog:      true
tags:
    - renderer
    - render
    - opengl
---
# ä½¿ç”¨perfç­‰å·¥å…·çœ‹ä¸€ä¸‹ç«ç„°å›¾ï¼Œæ£€æŸ¥ä¸€ä¸‹æ—¶é—´éƒ½å»å“ªäº†ğŸ‘€
![FlameGraph](/img/in-post/blah/FlameGraph.png)

# å‡å°‘uniformæ›´æ–°æ¬¡æ•°
## ä½¿ç”¨UBOå°†å¤šä¸ªuniformæ‰“åŒ…ï¼Œå¹¶ç»‘å®šåˆ°ç›¸åº”çš„meshä¸Šï¼Œæ¯”å¦‚æè´¨å±æ€§å’Œçº¹ç†åŠ è½½çŠ¶æ€
> TODOï¼šä¼šå¢åŠ GPUå†…å­˜å¼€é”€ï¼Œæ²¡å…·ä½“éªŒè¯è¿‡å®é™…å½±å“ï¼Œä¹Ÿä¸ä¸€å®šæ˜¯æœ€ä½³å®è·µ ğŸ¤·â€â™‚ï¸
```
layout (std140) uniform MaterialBlock {
    vec4 materialDiffuseColor;
    vec4 materialSpecularColor;
    float Opacity;
    float Shininess;
    float ShininessStrength;
    bool texture_diffuse_load;
    bool texture_specular_load;
    bool texture_normal_load;
    bool texture_ao_load;
    bool texture_alpha_load;
    bool texture_roughness_load;
    bool texture_metallic_load;
    bool texture_emissive_load;
} material;
```


## å»é‡ï¼Œèƒ½ä¸æ›´æ–°å°±ä¸æ›´æ–°
é€šè¿‡ä¸€å®šçš„é€»è¾‘å’Œåˆ¤æ–­ç­‰ç­‰ï¼Œå‡å°‘ä¸å¿…è¦çš„uniformæ›´æ–°ï¼Œæ¯”å¦‚åœ¨æ§åˆ¶è½¦é—¨æ—‹è½¬çš„æ—¶å€™ï¼Œè¿™ä¸ªè½¦é—¨çš„éƒ¨ä»¶æ˜¯å¯ä»¥å…±äº«ä¸€ç»„uniformçš„ï¼Œä¸éœ€è¦ä¸ºæ¯ä¸ªéƒ¨ä»¶éƒ½æ›´æ–°ä¸€æ¬¡è®¾ç½®ã€‚

# pngæ ¼å¼çš„çº¹ç†åŠ è½½é€Ÿåº¦æ…¢ï¼Œä½¿ç”¨å…¶ä»–GPUå‹å¥½çš„æ ¼å¼
TODO:è¿˜æ²¡å°è¯•è¿‡

# èƒ½åœ¨é¡¶ç‚¹ç€è‰²å™¨å®Œæˆçš„è®¡ç®—å°±ä¸è¦æ”¾åˆ°ç‰‡æ®µç€è‰²å™¨

# èƒ½åœ¨CPUå®Œæˆçš„è®¡ç®—å°±ä¸è¦æ”¾åˆ°GPUï¼Œæ¯”å¦‚MVPçŸ©é˜µçš„è®¡ç®—